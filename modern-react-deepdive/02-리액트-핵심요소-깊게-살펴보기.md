# 1. JSX란?

- JSX는 리액트가 등장하면서 메타에서 소개한 새로운 구문
- 하지만 리액트에서만 사용하라는 법은 없음

> JSX는 V8, Deno와 같은 자바스크립트 엔진이나 브라우저에 의해 실행되거나 표현되는 구문이 아님

- JSX를 포함한 코드는 반드시 트랜스파일러를 거쳐야 자바스크립트 런타임이 이해할 수 있는 코드로 변환된다.

> JSX의 목표 : 자바스크립트 내부에서 표현하기 까다로웠던 XML 스타일의 트리 구문을 작성하는데 도움

- JSX 내부에 트리 구조로 표현하고 싶은 다양한 것들을 작성하고, 트랜스파일을 거쳐 자바스크립트가 이해하는 코드로 변경하는 것이 목표
- JSX는 HTMl, XML 외에도 다른 구문으로 확장될 수 있게끔 고려돼 있음

## 1) JSX의 정의

JSX 컴포넌트

- JSXElement
- JSXAttributes
- JSXChildren
- JSXStrings

### JSXElement

- JSX를 구성하는 가장 기본 요소
- HTML의 elememt와 비슷한 역할

### JSXAttributes

- JSXElement에 부여할 수 있는 속성

### JSXChildren

- JSXElement의 자식 값
- JSX는 트리 구조를 나타내기 위해 만들어졌기 때문에 JSX로 부모와 자식 관게를 나타낼 수 있음

### JSXStrings

- HTML에서 사용 가능한 문자열은 모두 JSXStrings에서도 사용 가능

## 3) JSX는 어떻게 자바스크립트에서 변환될까?

`@babel/plugin-transform-react-jsx`

- 리액트에서 JSX를 변환하는 플러그인
- JSX 구문을 자바스크립트가 이해할 수 있는 형태로 변환

```
// JSX 코드

const ComponentA = <A required={true}>Hello World</A>

const ComponentB = <>Hello World</>

const ComponentC = (
  <div>
    <span>Hello World</span>
  </div>
)
```

```
// 변환된 코드
'use strict'

var ComponentA = React.createElement(
  A,
  {
    required: true,
  },
  'Hello World'
)

var ComponentB = React.createElemet(React.Fragment, null 'Hello World')

var ComponentC = React.createElement(
  'div',
  null,
  React.createElement('span', null, 'Hello World')
)
```

```
// 변환된 코드 (바벨 7.9.0 이후)
'use strict'

var _jsxRuntime = require('custom-jsx-library/jsx-runtime')

var ComponentA = (0, _jsxRuntime.jsx)(A, {
  required: true,
  children: 'Hello World',
})

var ComponentB = (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {
  children: 'Hello World',
})

var ComponentC = (0, _jsxRuntime.jsx)('div', {
  children: (0, _jsxRuntime.jsx)('span', {
    children: 'Hello World'
  })
})
```

# 2. 가상 DOM과 리액트 파이버

## 1) DOM과 브라우저 렌더링 과정

### DOM(Document Object Model)

- 웹페이지에 대한 인터페이스로 브라우저가 웹페이지의 콘텐츠와 구조를 어떻게 보여줄지에 대한 정보

### 브라우저 렌더링 과정

1. HTML 다운
2. HTML 파싱하여 DOM 노드로 구성된 DOM 트리 구성
3. 2.에서 CSS 파일 만나면 CSS 파일 다운로드
4. CSS 파싱하여 CSS 노드로 구성된 CSSOM 트리 구성
5. DOM 노드를 순회하며 사용자 눈에 보이는 노드만 방문
6. 5.에서 제외된 눈에 보이는 노드 대상으로 CSS 스타일 정보를 찾고 적용
   1. 레이아웃 : 좌표 계산
   2. 페인팅 : 색 등 그림

## 2) 가상 DOM의 탄생 배경

- 인터랙션에 따른 DOM의 최종 결과를 간편하게 제공 : DOM의 모든 변경 사항을 추적하는 것이 아니라, 결과적으로 만들어지는 DOM 결과물만 알도록 함

### 가상 DOM

- 리액트가 관리하는 가상의 DOM
- 웹페이지가 표시해야 할 DOM을 메모리에 저장하고, 리액트가 실제 변경에 대한 준비가 완료됐을 때 실제 브라우저 DOM에 반영

> 가상 DOM의 관리가 일반적인 DOM 관리(브라우저) 보다 빠르다?는 것은 사실이 아님

## 3) 가상 DOM을 위한 아키텍처, 리액트 파이버
